20180803-Security-JAWS-#10.md
-----

### 概要

* Security JAWS 【第10回】 勉強会
* 2018-08-03（金）19:00 - 21:35
* (株)ナビタイムジャパン
* https://s-jaws.doorkeeper.jp/events/76937
* TW: https://twitter.com/security_jaws
* ハッシュタグは #secjaws #secjaws10

-----

### Session1:T3Realize 合同会社 横堀 達也さん「すぐ出来る！デスクトップSSOはサーバレスで」

* https://speakerdeck.com/hollyrex/20180803-security-jaws-di-10hui-number-1-suguchu-lai-ru-desukutotupussohasabaresude

-----

### Session2:トレンドマイクロ株式会社 南原 正樹さん「Amazon EKS向けのDeep Security Smart Check でSecure CI/CD Pipelineを」

* (タイトル変わったけど見てなかった)
* DevOps + Security = DevSecOps
* コードやビルドの段階でのセキュリティ(自動)チェック＋
* Docker Hubに置かれているコンテナ使ったら脆弱性があったり、マルウェア(マイニングとか)が仕込まれている事も
* AWS等OSが触れないマネージドサービスのセキュリティはどうしたら？→

#### 新サービス「Deep Security Smart Check」

* 新サービス(日本では間もなく公開)「Deep Security Smart Check」、コンテナイメージ内のウィルススキャン＋脆弱性検出
* ~~よちよち歩きの~~ バージョン1.0公開されたらすぐ使いたい人は連絡ください！
* GitHub等にコミットするとそれをトリガーにDockerコンテナをスキャンする
* 英語版は公開済みでフリートライアル行けます！
* (会場内限定で)トライアルしたい人は名刺やアンケート等でメールアドレスください。

#### QA

* Q: 価格は？ A: プランニング中です(北米ではレジストリ数課金)
* Q: 脆弱性が見つかったら？ A: 現状パイプライン止めるだけ(仮想パッチみたいな機能は無い)、上位のWAFに情報投げてルール追加は可能

-----

### Session3:クラスメソッド株式会社 AWS事業本部 プロダクトグループ 田子昌行さん「小さな発見を大きな安心に 〜insightwatchのご紹介〜」

* https://insightwatch.io/
* AWSセキュリティに関するノウハウが無いのでどこからやればいいかわからない
* AWS環境が複数あり各アカウントのセキュリティの監視にコストがかかる
* CISベンチマークに基づくセキュリティチェックをしレポートと設定環境を提供
* (現状では)誰でも無料で使え、複数のAWSアカウントを連携して登録できる
* レポートは30日保存しているので過去のレポートもダウンロードできる
* 組織とプロジェクトを登録しその配下にAWSアカウントを登録

#### 使い方

* メールアドレスだけでサインアップ
* テンプレートを元に連携用IAMロールを登録
* ボタン一つでチェック開始
* 1アカウントあたり10分待つ
* 終わったらメールで通知
* WEBへレポートを取りに行く
* メリット：ベストプラクティスに従っているか確認できる

#### デモ

* (動画ではなく)手打ちのライブデモ！
* メールアドレスとパスワードとパスワード確認を入力…
* 「パスワードが一致していません」(打ち間違えた)
* 1分ほどで登録確認メールが届く、数文字の認証コードを初回ログイン時に入力
* プロジェクトを登録しそこにAWSアカウントを登録＋3クリックぐらいで連携用IAMが登録できる
* 「5分経って出来上がったものがこちらです」
* (会場から笑いが起きる)
* 結果の見方を紹介

#### 終わりに

* (システム構成図を見せる)社長「なるべく沢山のAWSサービス利用しろよ」
* 誰でも安心してAWSを利用できる環境を目指す
* 今後の機能追加予定：新しいセキュリティ要件の追加
* ジョブの定期実行を追加したい

#### QA

* Q: 価格はずっと無料？
* A: 有料プランを考えてはいるけど、現状のチェックは無料で提供し続ける予定。 ベンダーの人の利用も再利用されたらまずいけど、教育用用途なら大丈夫です。

#### おまけ：実際にやってみた

* この会場で実際にinsightwatchを使ってみたレポート
* https://twitter.com/famipapamart/status/1025334818119114752
* https://twitter.com/famipapamart/status/1025337178614722560
* https://twitter.com/famipapamart/status/1025340243023605760
* https://twitter.com/famipapamart/status/1025340858143371264
* レポート出力までトータルで20分

-----

### Session4:Netskope Japan株式会社 橋本一文さん「設定の誤りや外部脅威を防御するNetskopeのAWSセキュリティ自動化」

* vCloud Airを担当していた → オフィスに行ったら「来週からチームがなくなると言われた」(開発中止のお知らせ)
* aaSでの大きな情報漏洩は設定ミスであることが多い
* クラウドサービスの間にプロキシとして設置して、不自然な作業(アノマリーディテクション)をリストアップする
* 例えば、クラウドストレージAからBにファイルコピーするとか、同じアカウントがほぼ同時に違う場所で使われたとか
* ブロックするだけではなく利用者に理由を通知できる。 またテキストボックスを表示させ解除申請をすることも可能
* リアルタイム検査だけで無く定期チェックも可能(S3バケットに紛れ込んだウィルススキャン、機密データを保管など)

#### QA
* Q: 対応サービス数は？ シャドーIT検知出来る？
* A: 3000サービス程度のリアルタイム制御、検知だけなら24000サービス程度
* Q: 日本のサービスの対応状況は？
* A: 日本法人作ったので少しずつ対応している。 リクエストいただければ対応するけど開発に3ヶ月から半年かかる
* Q: エージェントは必須なの？ また削除された場合の対応は？
* A: 必須では無いが推奨、管理者権限もたれてエージェント削除に対応するのはこれだけでは非対応で資産管理ツールの範疇

-----

### Session5:株式会社リクルートテクノロジーズ 徳田 聡介さん・安東 美穂さん「ほんとうに大事なサービスを守れるのか！？実運用に向けてAWS WAFを検討してみた」

* 課外活動がミニ四駆で、セキュリティクラスタが集まるミニ四駆会やってます
* クラウド時代になって今までのセキュリティ機器やソフトを使うのは難しい
* そこで社内実績が少ないAWS WAFを検証してみた
* https://github.com/stqp/aws_waf_verification 検証の自動化スクリプト
* 検証用のWAFコンフィグと攻撃を複数用意して利用結果をCSVに出力する

#### AWS WAFの使い方＋感想

* Managedルール：セキュリティベンダーが有料で販売している、脆弱性が発見されてから対応まではベストフォーエフォート
* カスタムルール：利用者が手動で組み込む、複数の条件を書くと全てANDになるので注意、SQLインジェクションなど
* 落とし穴：デコード方法は必ず設定、初期値のnoneでは検知ミスが多い
* カスタムルールは考えるより堅い守りだった

#### 誤遮断

* 「concat()」とか「insert into」などが含まれると問答無用で遮断、コードを自由記述するサービスは注意
* ログの保存機能はランダムで5000件中500件だけを3時間のみ保存、全ての誤検知のログは取れない
* おまけ1：ログを何とかしてみる https://speakerdeck.com/tmorinaga/aws-waffalseroguga3shi-jian-sikajian-renaifalsedenantokasitemiru
* おまけ2： https://twitter.com/ke_ni_/status/1025354259485716480
* ログも取れないしチューニングは詳しくできないので運用は簡単(単に諦めるしかできない)

#### オススメの使い方

* 判明している脆弱性・ブラックリストIP・ブラックリストUAをピンポイントに止めるには良い

#### QA

* Q: 資料じっくり見たいです
* A: 資料は後からアップロードします

-----

### Session6:アマゾン ウェブ サービス ジャパン株式会社 松本 照吾さん「AWS Public Sector Summit Re:cap（セキュリティ観点から）」

* 世界かぶりもの協会
* AWSのConfigのRDK(Rule Developer kit)を使っている方がいらっしゃったら、Feedbackください
* ワシントン6月20,21日、2日で14000人あつめる
* パブリックセクターには政府・自治体だけでなく文教。医療も含む
* 米国陸軍のサイバーセキュリティ、米国証券取引委員会の取引データを監視
* City on a Cloud Award：警察のAlexaに殺人事件を通知など
* GovCloud使うにはパスポートもしくはグリーンカードが必要(米国市民のみの論理/物理アクセス)、6月13日に東海岸に2つめのリージョンがオープン
* たとえ最弱な日でも、クラウドは(既存オンプレ)よりセキュアだ。
* 専用リージョンまでいかなくても、パブリックセクター業務の95%は通常リージョンでカバーできる
* DevSecOpsはどうしてもツールの話になりがち→自動化は目的ではない、それより前に組織変革

#### QA

* Q: 太った？
* A: シンガポール10日間の研修のうち5日間サイクリングしました…が太りました！
* Q: 日本での利用状況は？
* A: 総務省はクラウドファースト宣言をしている
* A: 14000人中日本人5人ぐらいしかいなかった

-----
