20180608-NetworkProgrammability-#16.md
-----

### 概要

* ネットワークプログラマビリティ勉強会 #16
* 2018/06/08(金) 19:00
* 会場：DEJIMA
*  https://network-programmability.connpass.com/event/88418/
* TW: [#npstudy](https://twitter.com/search?q=%23npstudy)

#### はじめに

* I WANT YOU ! スピーカー、スタッフ、会場探してます！
* 懇親会までが勉強会です！
* スタッフも含め22時に完全撤収なのでご協力ください。
* 会場を提供いただいたCTC様、ありがとうございました。

#### DEJIMA宣伝コーナー

* CTC(伊藤忠テクノソリューションズ)社運営のスペース
* 普段はスタートアップの会社の交流
* CTC色(ブルー)を排除して黒と木目！
* イベント会場として借りたいときはCTCの営業まで！
* https://dejima.space/

-----

### SAI ちょっと調べてみた

* 沖 勝 さん(株式会社IIJ SDN開発部)
* スライド：  https://speakerdeck.com/imasaruoki/sai-tiyotutodiao-betemita?slide=1
* Network機器向けASICはパケット処理やVLANタグを高速に処理する(BGPなど重たい処理は別途乗せたCPUに任せる)
* 従来のSwitchはOS・ASICは自社製品
* ホワイトボックスSwitch： OSも自分で入れる、ブロードコムさんのASIC使うことが多い(他にCabinmなど)

#### SAI(Switch Abstraction Interface)

* 主にSwitch ASICを制御するC言語のAPI、今日現在の最新バージョンは1.3.0
* 開発はFacebookなど
* ホワイトボックスSwitch毎のAPIの上位に入って機種間の差異を吸収する
* (ASICメーカーが自社独自のAPIの他にSAI APIを書く形になる)

#### SAIに似たような物

* OpenFlow：L2を高速に制御する
* P4：プログラブルASICを楽に書ける
* SAI：OSベンダーが楽できる
* ASICベンダーのSDK：メーカー毎に差があるので学習が大変

#### SAIを使ったOS一覧

* SONiC：Microsoftのデータセンターで使われている、GitHubに各ホワイトボックス向けにビルド済みのOSもある、設定はJSONで書く
* OpenSwitch：HPが開発、今はDellがメンテ中(対応機器もDellのものが多い)、Debian・Ubuntuで動作、netlink経由での設定も
* 商用OSの場合はSAIの使用は不明

#### コンテナ・仮想マシンで動かすSAI利用OS

* SONiC OSをDockerで動かす
* OpenSwitchをVagrant版

#### まとめ

* SONiCやOpenSwitchは縁の下の力持ちなのでユーザーが意識する必要は無い
* コマンド等気になった人は仮想マシンで試そう
* スライドにはこの後実行例があるので良かったらどうぞ

#### QA

* Q:エラーコードはベンダー共通？
* A:ベンダー非依存でヘッダーファイル見れば全部書いてある

-----

### 17MBのフルルートルータ

* TW: [@nnao45](https://twitter.com/nnao45) さん (サイバーエージェント アドテク本部)
* 今回ただの趣味の話なのでご了承ください
* DockerコンテナでBGPフルルート配ってみよう
* 現状のBGPフルルートは70万経路
* ネットワーク10階層(要出展)：ヒト層・モノ層・カネ層・アプリケーション層(以下OSI7階層なので略)
* GoBGP * Docker * MultiStageBuild で作りました

#### 詳細

* toute views 6447(大学が運用するサービス)からフルルートもらう、
* できあがった物 https://github.com/nnao45/full-routaas
* Go言語・GoBGPは必要な部分だけ抜き出してコンテナ作れるので非常に小さなコンテナが作れる
* 書いたコードは300行ほど
* さらに小さくする：gokrazy(ゴークレイジー)を使ったり、(組込Linuxのように)必要な物を自力でピックする→1Mb切れる？！

#### OSSを使ったネットワーク化遺髪のこれから

* NWサービスをコンテナ化する、単機能にすることで容量が小さく
* 気軽にビルド & デストロイ
* 一から作るのではなく、道具を借りて組み立てるのであれば手軽にできる

#### WANTED

* サイバーエージェントではエンジニア募集してます
* k8s,OpenStack,AWS等触れるよ！

#### QA

* Q:(講演では発信側ルータでしたが)受け手で面白いこと出来そうですか？
* A:NoSQLに放り込むとデータ入出力が早いとか、外部連携が強いので色々出来ると思います

-----

### LT1: Lessons learned from ONOS development

* 清水 翔 さん
* 富士通研究所 Open Network OS開発のために アメリカへ赴任して最近帰ってきた

#### ONOSとは

* Open Networking Foundationが開発しているオープンソースのSDNコントローラー
* プロジェクトはコミュニティ＋ONF＋パートナー企業の派遣人員で開発
* サービスプロバイダ向けのSDNとして開発

#### 要求

* 具体的な物から抽象的な物まである
* 抽象的なAPIは下位のAPIを順々に叩くことで解決

#### 結果

* 多くの要求を受け付けたため実装が肥大化してしまった
* 色々やりたいことあったけど時間足りず

#### 反省点

* オープンソースコミュニティの運営の難しさ
* 短期的なコミュニティ拡大と長期的な技術負債防止のバランスが難しい
* 拡張を考えて作ったらやり過ぎた

-----

### LT2: Kapacitorでネットワークのリアルタイムイベント検出

* tetzさん

#### Kapacitorで出来ること

* 複雑で動的な基準に基づいてアラート設定が出来る
* ストリーム：短い時間で小規模なデータ処理をできる、ウィンドウ保持期間の間ずっとメモリ使う
* バッチ：InfluxDBへクエリーを投げる、長めの間隔で大規模なデータ処理向き、前者より少ないメモリ
* アラートが発生したらSlack等に通知できる

-----

### (20:36 ピザが来てないけど)懇親会開始

* ウェルカムスイーツ＋懇談会スポンサーはCisco様です！
